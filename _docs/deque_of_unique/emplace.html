---
last_modified_at: "2024-12-31 17:01:27 +0800"
layout: deque_of_unique_method
title: emplace
---

<table class="t-dcl-begin"><tbody>
  <tr class="t-dcl t-since-cxx11">
  <td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span>... <span class="me1">Args</span> <span class="sy1">&gt;</span><br>
      <span class="mw-geshi cpp source-cpp"><span class="t-lc">std::pair</span><span class="sy1">&lt;</span>const_iterator, bool<span class="sy1">&gt;</span> emplace<span class="br0">(</span> const_iterator pos, Args<span class="sy3">&amp;&amp;</span>... <span class="me1">args</span> <span class="br0">)</span><span class="sy4">;</span></span></div></td>
  <td class="t-dcl-nopad">  </td>
  </tr>
  <tr class="t-dcl-sep"><td></td><td></td><td></td></tr>
  </tbody>
</table>
<p>Inserts a new element into the container directly before <span class="t-c"><span class="mw-geshi cpp source-cpp">pos</span></span>.
</p>
<p>The element is constructed through <span class="t-lc"><a href="https://en.cppreference.com/w/cpp/memory/allocator_traits/construct" title="cpp/memory/allocator traits/construct">std::allocator_traits::construct</a></span>, which typically uses placement-new to construct the element in-place at a location provided by the container. However, if the required location has been occupied by an existing element, the inserted element is constructed at another location at first, and then move assigned into the required location.
</p>
<p>The arguments <span class="t-c"><span class="mw-geshi cpp source-cpp">args...</span></span> are forwarded to the constructor as <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1125">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>Args<span class="sy1">&gt;</span><span class="br0">(</span>args<span class="br0">)</span>...</span></span>. <span class="t-c"><span class="mw-geshi cpp source-cpp">args...</span></span> may directly or indirectly refer to a value in the container.
</p>
<p>All iterators (including the <a href="https://en.cppreference.com/w/cpp/container/deque/end" title="cpp/container/deque/end"><code>cend()</code></a> iterator) are invalidated. References are invalidated too, unless <span class="t-c"><span class="mw-geshi cpp source-cpp">pos <span class="sy1">==</span></span><code>&nbsp;</code><a href="https://en.cppreference.com/w/cpp/container/deque/begin" title="cpp/container/deque/begin"><code>cbegin()</code></a></span> or <span class="t-c"><span class="mw-geshi cpp source-cpp">pos <span class="sy1">==</span></span><code>&nbsp;</code><a href="https://en.cppreference.com/w/cpp/container/deque/end" title="cpp/container/deque/end"><code>cend()</code></a></span>, in which case they are not invalidated.
</p>
<h3><span class="mw-headline" id="Parameters">Parameters</span></h3>
<table class="t-par-begin">
  <tbody><tr class="t-par">
  <td> pos
  </td>
  <td> -
  </td>
  <td> iterator before which the new element will be constructed
  </td></tr>
  <tr class="t-par">
  <td> args
  </td>
  <td> -
  </td>
  <td> arguments to forward to the constructor of the element
  </td></tr>
  <tr class="t-par-hitem">
  <td colspan="3"> Type requirements
  </td></tr>
  <tr class="t-par-req">
  <td colspan="3"> -<div class="spacer"></div><code>T (the container's element type)</code> must meet the requirements of <a href="https://en.cppreference.com/w/cpp/named_req/MoveAssignable" title="cpp/named req/MoveAssignable"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">MoveAssignable</span></a>, <a href="https://en.cppreference.com/w/cpp/named_req/MoveInsertable" title="cpp/named req/MoveInsertable"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">MoveInsertable</span></a> and <a href="https://en.cppreference.com/w/cpp/named_req/EmplaceConstructible" title="cpp/named req/EmplaceConstructible"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">EmplaceConstructible</span></a>.
  </td></tr></tbody>
</table>
<h3><span class="mw-headline" id="Return_value">Return value</span></h3>
<p>The function returns a <span class="mw-geshi cpp source-cpp"><span class="t-lc">std::pair</span><span class="sy1">&lt;</span>const_iterator, bool<span class="sy1">&gt;</span></span>:
<br>
- first: an optional reference wrapper to the inserted element if the insertion is successful; otherwise, std::nullopt if the element already exists in the set.
<br>
- second: <span class="t-c"
><span class="mw-geshi cpp source-cpp"
  ><span class="kw2">true</span></span
></span
> if the insertion is successful; otherwise, <span class="t-c"
><span class="mw-geshi cpp source-cpp"
  ><span class="kw2">false</span></span
></span
> if the element already exists in the set.
</p>
<h3>
  <span class="mw-headline" id="Complexity">Complexity</span>
</h3>
<p>Average case: <code>O(M)</code>, worst case: <code>O(2 * M)</code>
, where M is the size of the deque_of_unique.</p>

<h3>Exceptions</h3>
<p>
  If an exception is thrown for any reason, this function has no effect (<a
    href="https://en.cppreference.com/w/cpp/language/exceptions#Exception_safety"
    title="cpp/language/exceptions"
    >strong exception safety guarantee</a
  >).
</p>
